/*
Item Name : Universal Mega Menu
Item URI : http://codecanyon.net/item/universal-responsive-mega-menu/4984236
Author URI : http://codecanyon.net/user/Pixelworkshop/
Version : 1.1
*/


(function(e){e.universalMegaMenu=function(t,n){function x(){var t=e(this);switch(r.menu_effect){case"hover_fade":t.children(m).fadeIn(r.menu_speed_show);break;case"hover_slide":t.children(m).slideDown(r.menu_speed_show);break;case"click_fade":t.click(function(){t.children(m).fadeIn(r.menu_speed_show)});break;case"click_slide":t.click(function(){t.children(m).slideDown(r.menu_speed_show)});break}}function T(){var t=e(this);switch(r.menu_effect){case"hover_fade":case"click_fade":t.find(m).fadeOut(r.menu_speed_hide);break;case"hover_slide":case"click_slide":t.find(m).slideUp(r.menu_speed_hide);break}}var r={menu_effect:"hover_fade",menu_speed_show:300,menu_speed_hide:200,menu_speed_delay:200,menu_click_outside:true,menubar_trigger:true,menubar_hide:false,menu_responsive:true};var i=this;i.options={};var s=e(t);var t=t;var o=s.children(".mgmenu"),u=e(o).children("li"),a=e(u).children("span"),f=e(u).find(".dropdown_container, .dropdown_fullwidth"),l=e(u).find(".dropdown_parent"),c=e(l).children("a"),h=e(l).find(".dropdown_flyout_level"),p=s.find(".mgmenu_button"),d=e(u).add(l),v=e(a).add(c),m=e(f).add(h);i.init=function(){r=e.extend(1,r,n);hoverIntentConfig={sensitivity:2,interval:r.menu_speed_delay,over:x,timeout:200,out:T};g();E();S();if(r.menu_click_outside===true){b()}if(r.menubar_trigger===true){megamenuBarHide=r.menubar_hide;w(s)}};var g=function(){if("ontouchstart"in document.documentElement&&r.menu_responsive===true){if(e(window).width()<768){e(m).hide()}else{y()}e(d).toggleClass("noactive");e(window).bind("orientationchange",function(){y()})}else{y();e(window).resize(function(){y();if(!s.is(":visible")&&e(window).width()<768){s.show(0)}})}e(p).click(function(){e(p).toggleClass("mgmenu_button_active");e(u).not(":eq(0)").toggle(0)})};var y=function(){e(m).css({display:"block"}).hide(0)};var b=function(){var n=navigator.userAgent,r=n.match(/iPad/i)?"touchstart":"click";e(document).on(r,function(t){e(d).removeClass("active");e(m).hide(0)});e(t).on(r,function(e){e.stopPropagation()})};var w=function(t){t.after('<a class="mgmenu_trigger" href="#"></a>');var n=t.next("a");if(megamenuBarHide===true&&e(window).width()>=768){t.hide(0);e(".mgmenu_trigger").toggleClass("active")}n.click(function(){e(this).prev(t).slideToggle(300);e(this).toggleClass("active");return false})};var E=function(){if("ontouchstart"in document.documentElement&&r.menu_responsive===true){e(d).unbind("mouseenter mouseleave").click(function(t){t.preventDefault();var n=e(this);n.siblings().removeClass("active").addClass("noactive").find(m).hide(0);n.toggleClass("active noactive").find(m).first().toggle(0).click(function(e){e.stopPropagation()})});e(document).click(function(){e(d).addClass("noactive");e(m).hide(0)});s.click(function(e){e.stopPropagation()});e(window).bind("orientationchange",function(){e(d).addClass("noactive");e(m).hide(0)});return}else{switch(r.menu_effect){case"open_close_fade":var t="fadeToggle",n="fadeOut";break;case"open_close_slide":var t="slideToggle",n="slideUp";break}switch(r.menu_effect){case"hover_fade":case"hover_slide":case"click_fade":case"click_slide":e(u).hoverIntent(hoverIntentConfig);e(l).hoverIntent(hoverIntentConfig);break;case"open_close_fade":case"open_close_slide":e(d).unbind("mouseenter mouseleave").click(function(){var i=e(this);i.siblings().removeClass("active").find(m)[n](r.menu_speed_hide);i.toggleClass("active").find(m).first().delay(r.menu_speed_delay)[t](r.menu_speed_show).click(function(e){e.stopPropagation()})});break}}};var S=function(){e(".mgmenu_tabs").each(function(t,n){var r=e(this);menuTabsNav=r.find(".mgmenu_tabs_nav > li > a");menuTabsNav.click(function(){var t=r.find("a.current").attr("href").substring(1),n=e(this),i=n.attr("href").substring(1);if(i!=t&&r.find(":animated").length==0){r.find(".mgmenu_tabs_nav li a").removeClass("current");n.addClass("current");r.find("#"+t).fadeOut(300,function(){r.find("#"+i).fadeIn(300);var e=r.find("#"+i).height()})}return false})})};i.init()};e.fn.universalMegaMenu=function(t){return this.each(function(){if(undefined==e(this).data("megaMenu")){var n=new e.universalMegaMenu(this,t);e(this).data("megaMenu",n)}})}})(jQuery)